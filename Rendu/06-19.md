​                                                           

# ***Rendu du 19 juin 2019 :***

- Modification des méthodes checkChemins() de la classe *Partie*. Cette modification permet de faire fonctionner la méthode dans tous les cas de figure.

- Correction de problèmes lors de la création de joueurs dans la méthode configuration() et charger() de la classe *Partie*.

- Modification de la méthode start() de la classe *Partie*. Cette modification permet au joueur de sauvegarder la partie en cours ou d'annuler un coup. Egalement, elle appelle la méthode checkChemins() pour chaque joueur.

- Ajout des méthodes savePlateau(), saveJoueurs() et saveBarrieres() dans la classe *Partie*. Ces classes permettent de faire un Back-Up de la partie, au cas-où un joueur place une barrière qui bloque le jeu ou qu'il annule son action.

- Création d'un constructeur de *Plateau* prenant en paramètre un damier.

- Création des Listeners pour la page d'accueil et pour les boutons présents en bas de page.

- Création des Frame de la fenêtre de Pause (*PauseFrame*, *MainPauseFrame*, *ChargementPauseFrame*, *SauvegarderPauseFrame*, *SauvegarderQuitterPauseFrame* )

- Implémentation des classes *AccueilFrame* et *ChargementFrame* et *MainFrame*. Egalement, début de l'implémentation de la classe *MainPauseFrame*.

- Changement de l'image de la page d'accueil et ajout d'une image pour la corbeille de la page de chargement d'anciennes parties.

- Ajout d'un fichier **img** dans le dossier **data**. Ce dossier possède les images de l'application.

   

 

**Classes modifiées :**

*Classe Humain*

```java
public Barriere jeu() {
      Barriere ret = null;
      try {
        int[][] deplacementsPossibles = this.pion.getDeplacementPossibles(this.plateau.getDamier());
        String nPosition = this.scanner.nextLine();
        boolean ok = false;
        ArrayList<String> letters = new ArrayList<String>();
        letters.add("A");
        letters.add("B");
        letters.add("C");
        letters.add("D");
        letters.add("E");
        letters.add("F");
        letters.add("G");
        letters.add("H");
        letters.add("I");
        while (!ok) {
          if (nPosition.trim().equalsIgnoreCase("help")) {
            ArrayList<String> help = RWFile.readFile("README");
            for (String line : help) {
              System.out.println(line);
            }
          }
          else if (nPosition.split(" ")[0].trim().equalsIgnoreCase("save")) {
            String nb = nPosition.split(" ")[1].trim();
            if (nb.equalsIgnoreCase("1") || nb.equalsIgnoreCase("2") || nb.equalsIgnoreCase("3")) {
              ret = new Barriere(nPosition,this.plateau);
              ok = true;
            }
          }
          else if (nPosition.trim().equalsIgnoreCase("showme")) {
            System.out.println("Nom du joueur : " + this.nom);
            System.out.println("Pion : " + this.pion.getCouleur().charAt(0));
            System.out.println("Barrieres restantes : " + this.barrieres.size());
          }
          else if (nPosition.trim().equalsIgnoreCase("back")) {
            ret = new Barriere(nPosition.trim(),this.plateau);
            ok = true;
          }
          else if (nPosition.split(" ")[0].trim().equalsIgnoreCase("move")) {
            for (int[] deplacement : deplacementsPossibles) {
              int x1 = (letters.indexOf(nPosition.split(" ")[1].split(",")[1].trim().split("")[0])) * 2;
              int y1 = (Integer.parseInt(nPosition.split(" ")[1].split(",")[0].trim().split("")[1]) - 1) * 2;
              if (deplacement[0] == x1) {
                if (deplacement[1] == y1) {
                  deplacerPion(new Coordonnee(x1,y1,-1,-1),this.plateau.getDamier());
                  ok = true;
                }
              }
            }
            if (!ok) {
              System.out.println("Impossible de déplacer le pion à cet endroit");
            }
          }
          else if (nPosition.split(" ")[0].trim().equalsIgnoreCase("wall")) {
            if (letters.contains(nPosition.split(" ")[1].split(",")[0].trim().split("")[1])) {
              int x1 = (letters.indexOf(nPosition.split(" ")[1].split(",")[1].trim().split("")[0])*2)-1;
              int y1 = (Integer.parseInt(nPosition.split(" ")[2].split(",")[0].trim().split("")[1])-1)*2;
              int x2 = (letters.indexOf(nPosition.split(" ")[1].split(",")[1].trim().split("")[0])*2)-1;
              int y2 = (Integer.parseInt(nPosition.split(" ")[2].split(",")[1].trim().split("")[0])-1)*2;
                Barriere tmp = placerBarriere(new Coordonnee(x1,y1,x2,y2));
                if (tmp != null) {
                  ok = true;
                  ret = tmp;
              }


            }
            else {
              int x1 = (int)((Integer.parseInt(nPosition.split(" ")[1].split(",")[1].trim().split("")[0])-1)*2 + (Integer.parseInt(nPosition.split(" ")[1].split(",")[0].trim().split("")[1])-1)*2)/2;
              int y1 = (letters.indexOf(nPosition.split(" ")[2].split(",")[0].trim().split("")[1]) * 2);
              int x2 = (int)((Integer.parseInt(nPosition.split(" ")[1].split(",")[1].trim().split("")[0])-1)*2 + (Integer.parseInt(nPosition.split(" ")[1].split(",")[0].trim().split("")[1])-1)*2)/2;
              int y2 = (letters.indexOf(nPosition.split(" ")[2].split(",")[1].trim().split("")[0]) * 2);
                Barriere tmp = placerBarriere(new Coordonnee(y1,x1,y2,x2));
                 if (tmp != null) {
                   ok = true;
                   ret = tmp;
               }
            }

          }
          else {
            nPosition = this.scanner.nextLine();
          }
          if (!ok) {
            nPosition = this.scanner.nextLine();
          }
        }
      }
      catch (NumberFormatException e) {
        System.err.println("Erreur dans le format des coordonnees, tapez 'help' pour plus d'informations");
        ret = new Barriere("error",this.plateau);
      }
      catch (IndexOutOfBoundsException ex) {
        System.err.println("Erreur, indice en dehors du tableau");
        ret = new Barriere("error",this.plateau);
      }
      finally {
        return ret;
      }

    }
```

*Classe Partie*

```java
  public void charger(String filename) {
      try {
        if (filename == null) {
          throw new Exception("Partie constructeur - Le nom du fichier doit être valide pour pouvoir être utilisé.");
        }
        else {
          this.joueurs = new ArrayList<Joueur>();
          ArrayList<String> lignes = RWFile.readFile(filename);
          String[] lesJoueurs = lignes.get(0).split(";"); // La liste des joueurs sous forme de String
          String[] lesPions = lignes.get(1).split(";"); // La liste des joueurs sous forme de String
          String[] lesBarrieres = lignes.get(2).split(";"); // La liste des barrieres sous forme de String
          String[] leReste = lignes.get(3).split(";"); // Le reste des informations (n° de tour & tour du premier joueur) sous forme de String
          ArrayList<String[]> desJoueurs = new ArrayList<String[]>(); // Liste de toutes les informations de chaque joueur
          int i = 0;

          for (String j: lesJoueurs) {
            desJoueurs.add(j.split(" "));
            i++;
          }
          this.tour = Integer.parseInt(leReste[0]);

          if (i == 2) {
            //Création des pions
            String[] pion1 = lesPions[0].split(" ");
            String[] pion2 = lesPions[1].split(" ");

            String couleur1 = pion1[0];
            String couleur2 = pion2[0];

            Coordonnee coord1 = new Coordonnee(Integer.parseInt(pion1[1]), Integer.parseInt(pion1[2]), -1, -1);
            Coordonnee coord2 = new Coordonnee(Integer.parseInt(pion2[1]), Integer.parseInt(pion2[2]), -1, -1);

            Coordonnee coord1B = new Coordonnee(0, 8, -1 ,-1);
            Coordonnee coord2B = new Coordonnee(16, 8, -1 ,-1);

            Pion p1 = new Pion(couleur1, coord1B);
            Pion p2 = new Pion(couleur2, coord2B);

            ArrayList<Barriere> barriere1 = new ArrayList<Barriere>();
            ArrayList<Barriere> barriere2 = new ArrayList<Barriere>();

            for (int j = 0; j < Integer.parseInt(lesBarrieres[0]); j++) {
              barriere1.add(new Barriere(couleur1, this.plateau));
            }
            for (int j = 0; j < Integer.parseInt(lesBarrieres[1]); j++) {
              barriere2.add(new Barriere(couleur2, this.plateau));
            }

            String[] joueur1 = desJoueurs.get(0);
            String[] joueur2 = desJoueurs.get(1);

            String nom1 = joueur1[0];
            String nom2 = joueur2[0];

            Joueur J1, J2;
            if (joueur1[1].equals("H") && joueur2[1].equals("H")) {
              this.mode = Mode.HH;
              J1 = new Humain(nom1, 1, couleur1, barriere1, p1, this.plateau);
              J2 = new Humain(nom2, 2, couleur2, barriere2, p2, this.plateau);
            }
            else if (joueur1[1].equals("H") && joueur2[1].equals("IA")) {
              this.mode = Mode.HI;
              J1 = new Humain(nom1, 1, couleur1, barriere1, p1, this.plateau);
              J2 = new IA(nom2, 2, couleur2, barriere2, p2, this.plateau, Difficulte.FACILE);
            }
            else {
              this.mode = Mode.II;
              J1 = new IA(nom1, 1, couleur1, barriere1, p1, this.plateau, Difficulte.FACILE);
              J2 = new IA(nom2, 2, couleur2, barriere2, p2, this.plateau, Difficulte.FACILE);
            }

            if (leReste[1].equals("1")) {
              this.joueurs.add(J1);
              this.joueurs.add(J2);
            }
            else {
              this.joueurs.add(J2);
              this.joueurs.add(J1);
            }

            J1.deplacerPion(coord1, this.plateau.getDamier());
            J2.deplacerPion(coord2, this.plateau.getDamier());
          }

          else {
            String[] pion1 = lesPions[0].split(" ");
            String[] pion2 = lesPions[1].split(" ");
            String[] pion3 = lesPions[2].split(" ");
            String[] pion4 = lesPions[3].split(" ");

            String couleur1 = pion1[0];
            String couleur2 = pion2[0];
            String couleur3 = pion3[0];
            String couleur4 = pion4[0];

            Coordonnee coord1 = new Coordonnee(Integer.parseInt(pion1[1]), Integer.parseInt(pion1[2]), -1, -1);
            Coordonnee coord2 = new Coordonnee(Integer.parseInt(pion2[1]), Integer.parseInt(pion2[2]), -1, -1);
            Coordonnee coord3 = new Coordonnee(Integer.parseInt(pion3[1]), Integer.parseInt(pion3[2]), -1, -1);
            Coordonnee coord4 = new Coordonnee(Integer.parseInt(pion4[1]), Integer.parseInt(pion4[2]), -1, -1);

            Coordonnee coord1B = new Coordonnee(0, 8, -1 ,-1);
            Coordonnee coord2B = new Coordonnee(16, 8, -1 ,-1);
            Coordonnee coord3B = new Coordonnee(8, 0, -1 ,-1);
            Coordonnee coord4B = new Coordonnee(8, 16, -1 ,-1);

            Pion p1 = new Pion(couleur1, coord1);
            Pion p2 = new Pion(couleur2, coord2);
            Pion p3 = new Pion(couleur3, coord3);
            Pion p4 = new Pion(couleur4, coord4);

            ArrayList<Barriere> barriere1 = new ArrayList<Barriere>();
            ArrayList<Barriere> barriere2 = new ArrayList<Barriere>();
            ArrayList<Barriere> barriere3 = new ArrayList<Barriere>();
            ArrayList<Barriere> barriere4 = new ArrayList<Barriere>();

            for (int j = 0; j < Integer.parseInt(lesBarrieres[0]); j++) {
              barriere1.add(new Barriere(couleur1, this.plateau));
            }
            for (int j = 0; j < Integer.parseInt(lesBarrieres[1]); j++) {
              barriere2.add(new Barriere(couleur2, this.plateau));
            }
            for (int j = 0; j < Integer.parseInt(lesBarrieres[2]); j++) {
              barriere3.add(new Barriere(couleur3, this.plateau));
            }
            for (int j = 0; j < Integer.parseInt(lesBarrieres[3]); j++) {
              barriere4.add(new Barriere(couleur4, this.plateau));
            }

            String[] joueur1 = desJoueurs.get(0);
            String[] joueur2 = desJoueurs.get(1);
            String[] joueur3 = desJoueurs.get(2);
            String[] joueur4 = desJoueurs.get(3);

            String nom1 = joueur1[0];
            String nom2 = joueur2[0];
            String nom3 = joueur3[0];
            String nom4 = joueur4[0];

            Joueur J1, J2, J3, J4;
            if (joueur1[1].equals("H") && joueur2[1].equals("H") && joueur3[1].equals("H") && joueur4[1].equals("H")) {
              this.mode = Mode.HHHH;
              J1 = new Humain(nom1, 1, couleur1, barriere1, p1, this.plateau);
              J2 = new Humain(nom2, 2, couleur2, barriere2, p2, this.plateau);
              J3 = new Humain(nom3, 3, couleur3, barriere3, p3, this.plateau);
              J4 = new Humain(nom4, 4, couleur4, barriere4, p4, this.plateau);
            }
            else if (joueur1[1].equals("H") && joueur2[1].equals("H") && joueur3[1].equals("H") && joueur4[1].equals("IA")) {
              J1 = new Humain(nom1, 1, couleur1, barriere1, p1, this.plateau);
              J2 = new Humain(nom2, 2, couleur2, barriere2, p2, this.plateau);
              J3 = new Humain(nom3, 3, couleur3, barriere3, p3, this.plateau);
              J4 = new IA(nom4, 4, couleur4, barriere4, p4, this.plateau, Difficulte.FACILE);
            }
            else if (joueur1[1].equals("H") && joueur2[1].equals("H") && joueur3[1].equals("IA") && joueur4[1].equals("IA")) {
              J1 = new Humain(nom1, 1, couleur1, barriere1, p1, this.plateau);
              J2 = new Humain(nom2, 2, couleur2, barriere2, p2, this.plateau);
              J3 = new IA(nom3, 3, couleur3, barriere3, p3, this.plateau, Difficulte.FACILE);
              J4 = new IA(nom4, 4, couleur4, barriere4, p4, this.plateau, Difficulte.FACILE);
            }
            else if (joueur1[1].equals("H") && joueur2[1].equals("IA") && joueur3[1].equals("IA") && joueur4[1].equals("IA")) {
              J1 = new Humain(nom1, 1, couleur1, barriere1, p1, this.plateau);
              J2 = new IA(nom2, 2, couleur2, barriere2, p2, this.plateau, Difficulte.FACILE);
              J3 = new IA(nom3, 3, couleur3, barriere4, p3, this.plateau, Difficulte.FACILE);
              J4 = new IA(nom4, 4, couleur4, barriere4, p4, this.plateau, Difficulte.FACILE);
            }
            else {
              J1 = new IA(nom1, 1, couleur1, barriere1, p1, this.plateau, Difficulte.FACILE);
              J2 = new IA(nom2, 2, couleur2, barriere2, p2, this.plateau, Difficulte.FACILE);
              J3 = new IA(nom3, 3, couleur3, barriere4, p3, this.plateau, Difficulte.FACILE);
              J4 = new IA(nom4, 4, couleur4, barriere4, p4, this.plateau, Difficulte.FACILE);
            }

            if (leReste[1].equals("1")) {
              this.joueurs.add(J1);
              this.joueurs.add(J2);
              this.joueurs.add(J3);
              this.joueurs.add(J4);
            }
            else if (leReste[1].equals("2")) {
              this.joueurs.add(J2);
              this.joueurs.add(J3);
              this.joueurs.add(J4);
              this.joueurs.add(J1);
            }
            else if (leReste[1].equals("3")) {
              this.joueurs.add(J3);
              this.joueurs.add(J4);
              this.joueurs.add(J1);
              this.joueurs.add(J2);
            }
            else {
              this.joueurs.add(J4);
              this.joueurs.add(J1);
              this.joueurs.add(J2);
              this.joueurs.add(J3);
            }
            J1.deplacerPion(coord1, this.plateau.getDamier());
            J2.deplacerPion(coord2, this.plateau.getDamier());
            J3.deplacerPion(coord3, this.plateau.getDamier());
            J4.deplacerPion(coord4, this.plateau.getDamier());
          }

          i = 0;
          for (String j : lesJoueurs) {
            String[] lesInfos = j.split(" ");
            if(lesInfos.length > 3) {
              if (lesInfos[3].equals("FACILE")) {
                ((IA)this.joueurs.get(i)).setDifficulte(Difficulte.FACILE);
              }
              else if (lesInfos[3].equals("MOYEN")) {
                ((IA)this.joueurs.get(i)).setDifficulte(Difficulte.MOYEN);
              }
              else if (lesInfos[3].equals("DIFFICILE")) {
                ((IA)this.joueurs.get(i)).setDifficulte(Difficulte.DIFFICILE);
              }
              else {
                ((IA)this.joueurs.get(i)).setDifficulte(Difficulte.IMPOSSIBLE);
              }
            }
            i++;
          }

          for (String b : lesBarrieres) {
            if (b.length() > 3) {
              String[] lesInfos = b.split(" ");
              String couleur = lesInfos[0];
              Coordonnee coord = new Coordonnee(Integer.parseInt(lesInfos[1]), Integer.parseInt(lesInfos[2]), Integer.parseInt(lesInfos[3]), Integer.parseInt(lesInfos[4]));
              Barriere laBarriere = new Barriere(couleur, this.plateau);
              laBarriere.setCoordonnee(coord);
              addBarriere(laBarriere);
            }
          }
        }
      }
      catch(FileNotFoundException e) {
        System.err.println("Partie construceur - Fichier non trouvé (" + filename + ")");
      }
      catch (IndexOutOfBoundsException e) {
        System.err.println("IndexOutOfBoundsException");
      }
      catch(Exception e) {
        System.err.println(e.getMessage());
      }
    }

// --- //

private void configuration(Mode mode, String visuel) {

      // Créer les joueurs
        if (visuel.equals("Texte")) {
          if ((mode.equals(Mode.HH)) || (mode.equals(Mode.HI)) || (mode.equals(Mode.II))) {
            ArrayList<Barriere> BarriereJ1 = new ArrayList<Barriere>();
            ArrayList<Barriere> BarriereJ2 = new ArrayList<Barriere>();
            ArrayList<String> lignes = RWFile.readFile("config2");
            this.plateau = new Plateau(Integer.parseInt(lignes.get(0)));
            String[] coord1 = lignes.get(1).split(" ");
            String[] coord2 = lignes.get(2).split(" ");

            for (int i = 0; i< 10; i++) {
              BarriereJ1.add(new Barriere("O", this.plateau));
            }
            for (int i = 0; i < 10; i++) {
              BarriereJ2.add(new Barriere("W", this.plateau));
            }

            Coordonnee c1 = new Coordonnee(Integer.parseInt(coord1[0]),Integer.parseInt(coord1[1]), -1, -1);
            Coordonnee c2 = new Coordonnee(Integer.parseInt(coord2[0]),Integer.parseInt(coord1[1]), -1, -1);

            Joueur J1, J2;
            if (mode.equals(Mode.HH)) {
              J1 = new Humain("Joueur1",1,"O",BarriereJ1,new Pion("O",c1), this.plateau);
              J2 = new Humain("Joueur2",2,"W",BarriereJ2,new Pion("W",c2), this.plateau);
            }
            else if (mode.equals(Mode.HI)) {
              J1 = new Humain("Joueur1",1,"O",BarriereJ1,new Pion("O",c1), this.plateau);
              J2 = new IA("IA1",2,"W",BarriereJ2,new Pion("W",c2), this.plateau,Difficulte.FACILE);
            }
            else {
              J1 = new IA("Joueur1",1,"O",BarriereJ1,new Pion("O",c1), this.plateau,Difficulte.FACILE);
              J2 = new IA("IA1",2,"W",BarriereJ2,new Pion("W",c2), this.plateau,Difficulte.FACILE);
            }

            ArrayList<int[]> aChanger = new ArrayList<int[]>();
            int[] lesCoords1 = {Integer.parseInt(coord1[0]),Integer.parseInt(coord1[1])};
            int[] lesCoords2 = {Integer.parseInt(coord2[0]),Integer.parseInt(coord1[1])};
            aChanger.add(lesCoords1);
            aChanger.add(lesCoords2);
            this.plateau.setDisponibilite(aChanger);

            this.joueurs.add(J1);
            this.joueurs.add(J2);
          }

          else {
            ArrayList<Barriere> BarriereJ1 = new ArrayList<Barriere>();
            ArrayList<Barriere> BarriereJ2 = new ArrayList<Barriere>();
            ArrayList<Barriere> BarriereJ3 = new ArrayList<Barriere>();
            ArrayList<Barriere> BarriereJ4 = new ArrayList<Barriere>();
            ArrayList<String> lignes = RWFile.readFile("config4");
            this.plateau = new Plateau(Integer.parseInt(lignes.get(0)));
            String[] coord1 = lignes.get(1).split(" ");
            String[] coord2 = lignes.get(2).split(" ");
            String[] coord3 = lignes.get(3).split(" ");
            String[] coord4 = lignes.get(4).split(" ");

            for (int i = 0; i< 5; i++) {
              BarriereJ1.add(new Barriere("O", this.plateau));
            }
            for (int i = 0; i< 5; i++) {
              BarriereJ2.add(new Barriere("W", this.plateau));
            }
            for (int i = 0; i< 5; i++) {
              BarriereJ3.add(new Barriere("Z", this.plateau));
            }
            for (int i = 0; i< 5; i++) {
              BarriereJ4.add(new Barriere("A", this.plateau));
            }

            Coordonnee c1 = new Coordonnee(Integer.parseInt(coord1[0]),Integer.parseInt(coord1[1]), -1, -1);
            Coordonnee c2 = new Coordonnee(Integer.parseInt(coord2[0]),Integer.parseInt(coord2[1]), -1, -1);
            Coordonnee c3 = new Coordonnee(Integer.parseInt(coord3[0]),Integer.parseInt(coord3[1]), -1, -1);
            Coordonnee c4 = new Coordonnee(Integer.parseInt(coord4[0]),Integer.parseInt(coord4[1]), -1, -1);

            Joueur J1 = new Humain("Joueur1",1,"O",BarriereJ1,new Pion("O",c1), this.plateau);
            Joueur J2 = new Humain("Joueur2",2,"W",BarriereJ2,new Pion("W",c2), this.plateau);
            Joueur J3 = new Humain("Joueur3",3,"Z",BarriereJ3,new Pion("Z",c3), this.plateau);
            Joueur J4 = new Humain("Joueur4",4,"A",BarriereJ4,new Pion("A",c4), this.plateau);

            ArrayList<int[]> aChanger = new ArrayList<int[]>();
            int[] lesCoords1 = {Integer.parseInt(coord1[0]),Integer.parseInt(coord1[1])};
            int[] lesCoords2 = {Integer.parseInt(coord2[0]),Integer.parseInt(coord1[1])};
            int[] lesCoords3 = {Integer.parseInt(coord3[0]),Integer.parseInt(coord3[1])};
            int[] lesCoords4 = {Integer.parseInt(coord4[0]),Integer.parseInt(coord4[1])};
            aChanger.add(lesCoords1);
            aChanger.add(lesCoords2);
            aChanger.add(lesCoords3);
            aChanger.add(lesCoords4);
            this.plateau.setDisponibilite(aChanger);

            this.joueurs.add(J1);
            this.joueurs.add(J2);
            this.joueurs.add(J3);
            this.joueurs.add(J4);

          }
        }

        else if (visuel.equals("Visuel")) {
          if (mode.equals(Mode.HH) || mode.equals(Mode.HI)) {
            ArrayList<Barriere> BarriereJ1 = new ArrayList<Barriere>();
            ArrayList<Barriere> BarriereJ2 = new ArrayList<Barriere>();
            ArrayList<String> lignes = RWFile.readFile("config2");
            this.plateau = new Plateau(Integer.parseInt(lignes.get(0)));
            for (int i = 0; i<= 10; i++) {
              BarriereJ1.add(new Barriere("ROUGE", this.plateau));
            }
            for (int i = 0; i <= 10; i++) {
              BarriereJ2.add(new Barriere("VERT", this.plateau));
            }
          }
          else {
            ArrayList<Barriere> BarriereJ1 = new ArrayList<Barriere>();
            ArrayList<Barriere> BarriereJ2 = new ArrayList<Barriere>();
            ArrayList<Barriere> BarriereJ3 = new ArrayList<Barriere>();
            ArrayList<Barriere> BarriereJ4 = new ArrayList<Barriere>();
            ArrayList<String> lignes = RWFile.readFile("config4");
            this.plateau = new Plateau(Integer.parseInt(lignes.get(0)));

            for (int i = 0; i<= 5; i++) {
              BarriereJ1.add(new Barriere("ROUGE", this.plateau));
            }
            for (int i = 0; i<= 5; i++) {
              BarriereJ2.add(new Barriere("VERT", this.plateau));
            }
            for (int i = 0; i<= 5; i++) {
              BarriereJ3.add(new Barriere("JAUNE", this.plateau));
            }
            for (int i = 0; i<= 5; i++) {
              BarriereJ4.add(new Barriere("BLEU", this.plateau));
            }
          }
        }
      }

// --- //

public void start() {
      ArrayList<Pion> listePion = new ArrayList<Pion>();
      for (Joueur j : this.joueurs) {
        listePion.add(j.getPion());
      }
      Plateau oldPlateau = this.savePlateau();
      ArrayList<Joueur> oldJoueurs = this.saveJoueurs(oldPlateau);
      ArrayList<Barriere> oldBarrieres = this.saveBarrieres();
      Plateau olderPlateau = this.savePlateau();
      ArrayList<Joueur> olderJoueurs = this.saveJoueurs(olderPlateau);
      ArrayList<Barriere> olderBarrieres = this.saveBarrieres();
      while (true) {
        for (int i = 0 ; i < this.joueurs.size() ; i++) {
          boolean error = false;
          olderPlateau = oldPlateau;
          olderJoueurs = oldJoueurs;
          olderBarrieres = oldBarrieres;
          oldPlateau = this.savePlateau();
          oldJoueurs = this.saveJoueurs(oldPlateau);
          oldBarrieres = this.saveBarrieres();
          System.out.println(this.plateau.toString(listePion,this.joueurs.get(i).getPion()));
          Barriere b = this.joueurs.get(i).jeu();
          if (b != null) {
            if (b.getCouleur().equalsIgnoreCase("back")) {
              this.plateau = olderPlateau;
              this.joueurs = olderJoueurs;
              this.barrieres = olderBarrieres;
              listePion = new ArrayList<Pion>();
              for (Joueur j : this.joueurs) {
                listePion.add(j.getPion());
              }
              i -= 2;
              if (i < 0) {
                i = this.joueurs.size() + i;
              }
            }
            else if (b.getCouleur().equalsIgnoreCase("error")) {
              this.plateau = oldPlateau;
              this.joueurs = oldJoueurs;
              this.barrieres = oldBarrieres;
              listePion = new ArrayList<Pion>();
              for (Joueur j : this.joueurs) {
                listePion.add(j.getPion());
              }
              i--;
            }
            else if (b.getCouleur().split(" ")[0].trim().equalsIgnoreCase("save")) {
              if (b.getCouleur().split(" ")[1].trim().equals("1") || b.getCouleur().split(" ")[1].trim().equals("2") || b.getCouleur().split(" ")[1].trim().equals("3")) {
                System.out.println("sauvegarde en cours");
                this.sauvegarder("sauvegarde" + b.getCouleur().split(" ")[1] , this.joueurs.get(i));
              }
              else {
                System.err.println("Erreur lors de la sauvegarde de la partie, numero de fichier invalide");
              }
            }
            else {
              addBarriere(b);
            }
          }
          for (Joueur j2 : this.joueurs) {
            this.startRec = System.currentTimeMillis();
            this.endRec = 5*1000;
            int[][] copieDamier = this.copieDamier();
            copieDamier[j2.getPion().getCoordonnee().getX1()][j2.getPion().getCoordonnee().getY1()] = 2;
            if (!checkChemins(j2.getPion().getCoordonnee().getX1(),j2.getPion().getCoordonnee().getY1(),j2.getNumero(),copieDamier)) {
              System.out.println("Impossible, " + j2.getNom() + " se retrouverait bloque");
              this.plateau = oldPlateau;
              this.joueurs = oldJoueurs;
              this.barrieres = oldBarrieres;
              listePion = new ArrayList<Pion>();
              for (Joueur j : this.joueurs) {
                listePion.add(j.getPion());
              }
              error = true;
            }
            else if (this.startRec == -1) {
              System.out.println("Impossible, " + j2.getNom() + " se retrouverait bloque");
              this.plateau = oldPlateau;
              this.joueurs = oldJoueurs;
              this.barrieres = oldBarrieres;
              listePion = new ArrayList<Pion>();
              for (Joueur j : this.joueurs) {
                listePion.add(j.getPion());
              }
              error = true;
            }
          }
          fin();
          if (error) {
            i--;
          }
        }
      }
    }

// --- //

private int[][] copieDamier() {
     int[][] ret = new int[this.plateau.getDamier().length][this.plateau.getDamier().length];
     for (int i = 0 ; i < this.plateau.getDamier().length ; i++) {
       for (int j = 0 ; j < this.plateau.getDamier().length ; j++) {
         if (this.plateau.getDamier()[i][j]) {
           ret[i][j] = 1;
         }
         else {
           ret[i][j] = 0;
         }
       }
     }
     return ret;
   }

// --- //

private boolean checkChemins (int x , int y , int num , int[][] damier) {
      boolean ret = false;
      try {
        if (Math.abs(this.startRec - System.currentTimeMillis()) < this.endRec) {
          int[][] newPosition = deplacementsSuivants(x,y,damier);
          int i = 0;

          while (i < newPosition.length && !ret) {
            if (checkVisite(newPosition[i][0],newPosition[i][1],damier) == 1) {
              damier[newPosition[i][0]][newPosition[i][1]] = 2;
              if (num == 1) {
                int k = 0;
                while (k < damier.length && !ret) {
                  int l = 0;
                  while (l < damier.length && !ret) {
                    if (k == 16 && damier[k][l] == 2) {
                      ret = true;
                    }
                    l += 2;
                  }
                  k += 2;
                }
              }
              else if (num == 2) {
                int k = 0;
                while (k < damier.length && !ret) {
                  int l = 0;
                  while (l < damier.length && !ret) {
                    if (k == 0 && damier[k][l] == 2) {
                      ret = true;
                    }
                    l += 2;
                  }
                  k += 2;
                }
              }
              else if (num == 3) {
                int k = 0;
                while (k < damier.length && !ret) {
                  int l = 0;
                  while (l < damier.length && !ret) {
                    if (l == 16 && damier[k][l] == 2) {
                      ret = true;
                    }
                    l += 2;
                  }
                  k += 2;
                }
              }
              else if (num == 4) {
                int k = 0;
                while (k < damier.length && !ret) {
                  int l = 0;
                  while (l < damier.length && !ret) {
                    if (l == 0 && damier[k][l] == 2) {
                      ret = true;
                    }
                    l += 2;
                  }
                  k += 2;
                }
              }
                if (checkChemins(newPosition[i][0],newPosition[i][1],num,damier)) {
                  ret = true;
                }
                else {
                  damier[newPosition[i][0]][newPosition[i][1]] = 1;
                }
            }
            i++;
          }
        }
        else {
          ret = true;
          this.startRec = -1;
        }
      }
      catch (NullPointerException e) {
        System.err.println("Erreur checkChemins(), parametre null");
      }
      catch (IndexOutOfBoundsException ex) {
        System.err.println("Erreur checkChemins(), indice en dehors du plateau");
      }
      catch (Exception exc) {
        System.err.println("Erreur checkChemins(), cause inconnue");
      }
      finally {
        return ret;
      }

    }

// --- //

private Plateau savePlateau() {
        boolean[][] retDamier = new boolean[this.plateau.getDamier().length][this.plateau.getDamier().length];
        for (int i = 0 ; i < retDamier.length ; i++) {
          for (int j = 0 ; j < retDamier.length ; j++) {
            retDamier[i][j] = this.plateau.getDamier()[i][j];
          }
        }
        Plateau ret = new Plateau(retDamier);
        return ret;
      }

// --- //

private ArrayList<Joueur> saveJoueurs(Plateau plateau) {
        ArrayList<Joueur> ret = new ArrayList<Joueur>();
        Pion p;
        ArrayList<Barriere> listeBarriere;
        for (Joueur j : this.joueurs) {
          p = new Pion(j.getCouleur(),j.getPion().getCoordonnee());
          listeBarriere = new ArrayList<Barriere>();
          for (Barriere b  : j.getBarrieres()) {
            Barriere newB = new Barriere(j.getCouleur(),plateau);
            listeBarriere.add(newB);
          }
          if (j.isHumain()) {
            ret.add(new Humain(j.getNom(),j.getNumero(),j.getCouleur(),listeBarriere,p,plateau));
          }
          else {
            ret.add(new IA(j.getNom(),j.getNumero(),j.getCouleur(),listeBarriere,p,plateau,((IA)j).getDifficulte()));
          }
        }
        return ret;
      }

// --- //

private ArrayList<Barriere> saveBarrieres() {
        ArrayList<Barriere> ret = new ArrayList<Barriere>();
        for (Barriere b : this.barrieres) {
          ret.add(b);
        }
        return ret;
      }

```

*Classe Plateau*

```java
public Plateau (boolean[][] damier) {
        try {
          if (damier == null) {
            throw new Exception ("Erreur Plateau(), parametre null");
          }
          else {
            this.DAMIER = damier;
            this.TAILLE = damier.length;
          }
        }
        catch (Exception e) {
          System.err.println(e.getMessage());
        }
      }
```

*Classe AccueilFrame*

```java
package view;

import controller.*;
import javax.swing.*;
import java.awt.*;

/**
  * Cette classe gère la création de la page d'acccueil du jeu et de ses composants graphiques.
  * @author Drmarsupial35, griffin568
  * @version 0.1.0
  */
public class AccueilFrame extends JPanel {

  private MainFrame parent;
  private JButton PhotoButton, LancerBton, ChargerBton, QuitterBton;
  private JPanel chargement, choixNombre;
  private JLabel titre;

  /**
    * Créé une page d'acccueil vide. Ce constructeur est utilisé pour permettre son utilisation future dans d'autres classes.
    */
  public AccueilFrame() {}

  /**
    * Créer la page d'acccueil de l'application. Cette méthode appele la méthode privée initComponent()
    * @param parent La fenetre principale de jeu qui est utilisée pour changer l'écran affiché
    * @param chargement L'écran permettant de choisir la partie que l'on souhaite charger
    * @param choixNombre L'écran permettant de créer une nouvelle partie et de choisir le nombre de joueurs de cette dernière
    */
  public AccueilFrame(MainFrame parent, JPanel chargement, JPanel choixNombre) {
    try {
      if (parent == null) {
        throw new Exception("L'écran principal doit exister pour créer l'Accueil.");
      }
      else if (chargement == null) {
        throw new Exception("L'écran de chargement de partie doit exister pour créer l'Accueil.");
      }
      else if (choixNombre == null) {
        throw new Exception("L'écran de choix de nombre de joueurs doit exister pour créer l'Accueil.");
      }
      else {
        this.parent = parent;
        this.chargement = chargement;
        this.choixNombre = choixNombre;
        this.setBackground(Color.BLACK);
        initComponent();
      }
    }
    catch(Exception e) {
      System.err.println(e.getMessage());
    }
  }

  /**
    *Initialise les composants graphiques de la page d'acccueil, tel que les boutons cliquables ou encore l'image du jeu.
    */
  private void initComponent() {
    this.setLayout(new BorderLayout());
    JPanel leftContainer = new JPanel(new BorderLayout());
    JPanel rightContainer = new JPanel(new BorderLayout());
    JPanel downContainer = new JPanel(new BorderLayout());

    leftContainer.setBackground(Color.BLACK);
    rightContainer.setBackground(Color.BLACK);
    downContainer.setBackground(Color.BLACK);

    this.titre = new JLabel("QUORIDOR");
    this.LancerBton = new JButton("Lancer une nouvelle partie");
    this.ChargerBton = new JButton("Charger une nouvelle partie");
    this.QuitterBton = new JButton("QUITTER");
    this.PhotoButton = new JButton(new ImageIcon("../data/img/Accueil_Photo.png"));

    this.QuitterBton.addActionListener(new DownButtonListener(this.parent, ""));
    this.LancerBton.addActionListener(new AccueilListener(this.parent, this.choixNombre));
    this.ChargerBton.addActionListener(new AccueilListener(this.parent, this.chargement));

    this.LancerBton.setPreferredSize(new Dimension(500, 100));
    this.ChargerBton.setPreferredSize(new Dimension(500, 100));
    this.QuitterBton.setPreferredSize(new Dimension(200, 50));

    this.PhotoButton.setOpaque(false);
    this.PhotoButton.setContentAreaFilled(false);
    this.PhotoButton.setBorderPainted(false);
    this.PhotoButton.setFocusable(false);

    leftContainer.add(this.PhotoButton,BorderLayout.CENTER);
    rightContainer.add(this.LancerBton,BorderLayout.NORTH);
    rightContainer.add(this.ChargerBton,BorderLayout.SOUTH);
    downContainer.add(this.QuitterBton,BorderLayout.EAST);

    add(leftContainer,BorderLayout.WEST);
    add(rightContainer,BorderLayout.EAST);
    add(downContainer,BorderLayout.SOUTH);
  }
}
```

*Classe ChargementFrame*

```java
package view;

import controller.*;
import javax.swing.*;
import java.awt.*;

/**
  * Cette classe gère la création de la page de chargement de parties, ainsi que ses composants graphiques.
  * @author Drmarsupial35, griffin568
  * @version 0.1.0
  */
public class ChargementFrame extends JPanel {

  private MainFrame mainF;
  private JPanel partie;

  private JButton save1, save2, save3, retour, corbeille;
  private JLabel titre;

  /**
    * Créer la page de chargement de partie. Cette méthode appele la méthode privée initComponent()
    * @param parent La fenetre principale de jeu qui est utilisée pour changer l'écran affiché
    * @param partie l'écran où la partie est affiché
    */
  public ChargementFrame(MainFrame parent, JPanel partie) {
    try {
      if (parent == null) {
        throw new Exception("ChargementFrame constructeur - L'écran principal doit exister pour créer l'écran de chargement de parties.");
      }
      else if (partie == null) {
        throw new Exception("ChargementFrame constructeur - L'écran de jeu doit exister pour créer l'écran de chargement de parties.");
      }
      else {
        this.mainF = mainF;
        this.partie = partie;
        this.setBackground(Color.BLACK);
        initComponent();
      }
    }
    catch(Exception e) {
      System.err.println(e.getMessage());
    }
  }

  /**
    *Initialise les composants graphiques de la page de chargement (principalement les boutons cliquables).
    */
  private void initComponent() {
    this.setLayout(new BorderLayout());
    JPanel upContainer = new JPanel(new BorderLayout());
    JPanel downContainer = new JPanel(new BorderLayout());
    JPanel centerContainer = new JPanel(new GridLayout(3,1));

    upContainer.setBackground(Color.BLACK);
    centerContainer.setBackground(Color.BLACK);
    downContainer.setBackground(Color.BLACK);

    this.titre = new JLabel("CHARGER UNE PARTIE");
    this.save1 = new JButton("Emplacement 1");
    this.save2 = new JButton("Emplacement 2");
    this.save3 = new JButton("Emplacement 3");
    this.retour = new JButton("RETOUR");
    this.corbeille = new JButton(new ImageIcon("../data/img/Corbeille.png"));

    this.retour.addActionListener(new DownButtonListener(this.mainF, "Accueil"));

    this.corbeille.setOpaque(false);
    this.corbeille.setContentAreaFilled(false);
    this.corbeille.setBorderPainted(false);

    this.save1.setPreferredSize(new Dimension(500, 100));
    this.save2.setPreferredSize(new Dimension(500, 100));
    this.save3.setPreferredSize(new Dimension(500, 100));

    upContainer.add(this.titre, BorderLayout.CENTER);
    upContainer.add(this.corbeille, BorderLayout.EAST);
    centerContainer.add(this.save1);
    centerContainer.add(this.save2);
    centerContainer.add(this.save3);
    downContainer.add(this.retour, BorderLayout.EAST);

    add(upContainer,BorderLayout.NORTH);
    add(centerContainer,BorderLayout.CENTER);
    add(downContainer,BorderLayout.SOUTH);
  }
}

```

*Classe MainFrame*

```java
package view;

import javax.swing.*;
import java.awt.*;
import java.awt.event.WindowEvent;

public class MainFrame extends JFrame {


  private JPanel switchablePanel;
  private CardLayout switchableCL;

  private AccueilFrame acccueil;
  private ChargementFrame chargement;
  private ChoixNombreFrame choixNombre;
  private PartieFrame partie;
  private Partie2JoueursFrame partie2Joueurs;
  private Partie4JoueursFrame partie4Joueurs;
  private MainPauseFrame pause;

  /**
    *
    */
  public MainFrame() {
    this.setIconImage(new ImageIcon("../data/img/Logo.jpg").getImage());
    this.setTitle("Quoridor");
    this.getContentPane().setLayout(new BorderLayout());
    this.setDefaultCloseOperation(EXIT_ON_CLOSE);
    this.initComponents();
    this.setExtendedState(JFrame.MAXIMIZED_BOTH);
    this.setUndecorated(true);
    this.setResizable(false);
    this.setVisible(true);
  }

  /**
    *
    */
  private void initComponents() {
    this.acccueil = new AccueilFrame();
    this.partie = new PartieFrame(this, this.acccueil);
    this.chargement = new ChargementFrame(this, this.partie);
    this.partie2Joueurs = new Partie2JoueursFrame(this, this.partie);
    this.partie4Joueurs = new Partie4JoueursFrame(this, this.partie);
    this.choixNombre = new ChoixNombreFrame(this, this.partie2Joueurs, this.partie4Joueurs);
    this.acccueil = new AccueilFrame(this, this.chargement, this.choixNombre);

    this.switchablePanel = new JPanel(new CardLayout());

    this.switchablePanel.add(this.acccueil, "Accueuil");
    this.switchablePanel.add(this.chargement, "Chargement");
    this.switchablePanel.add(this.choixNombre, "choixNombre");
    this.switchablePanel.add(this.partie, "Partie");
    this.switchablePanel.add(this.partie2Joueurs, "Partie 2 Joueurs");
    this.switchablePanel.add(this.partie4Joueurs, "Partie 4 Joueurs");

    this.switchableCL = (CardLayout)(this.switchablePanel.getLayout());
    this.switchableCL.show(this.switchablePanel, "Accueuil");

    this.add(this.switchablePanel, BorderLayout.CENTER);
  }


  /**
    * Retourne le panel échangeable
    * @return le panel échangeable
  */
  public JPanel getSwitchablePanel() {
    return this.switchablePanel;
  }

  /**
    * Rend le panel qui est actuellement affiché à l'écran
    * @return le panel actuel
  */
  public CardLayout getSwitchableCL() {
    return this.switchableCL;
  }


  /**
    * Active ou désactive le menu pause. Cette méthode sera appelée par le listener de la classe PartieFrame
    * @param b vrai si on active le menu pause, faux si on souhaite le désactiver.
    */
  public void activerPause(boolean b) {
    if (b) {
      this.pause = new MainPauseFrame(this, this.acccueil);
    }
    else {
      this.pause.dispatchEvent(new WindowEvent(this.pause, WindowEvent.WINDOW_CLOSING));
    }
  }
}

```

*Classe MainPauseFrame*

```java
package view;

import javax.swing.*;
import java.awt.*;

public class MainPauseFrame extends JFrame {

  private JPanel switchablePanel;
  private CardLayout switchableCL;

  private MainFrame parent;
  private AccueilFrame acccueil;
  private PauseFrame pause;
  private ChargementPauseFrame chargementPause;
  private SauvegarderPauseFrame sauvegardePause;
  private SauvegarderQuitterPauseFrame sauvegardeQuitterPause;

  public MainPauseFrame(MainFrame parent, AccueilFrame acccueil) {
    try {
      if (parent == null) {
        throw new Exception("La Frame parent doit exister pour créer l'écran de Pause.");
      }
      else if (acccueil == null) {
        throw new Exception("La page d'acccueil doit exister pour pouvoir être référencée par l'écran de pause.");
      }
      else {
        this.parent = parent;
        this.acccueil = acccueil;

        initComponent();

        this.setIconImage(new ImageIcon("../data/Logo.jpg").getImage());
        this.setTitle("Quoridor - Pause");
        this.setBackground(Color.BLACK);

        this.setSize(1300, 650);
        this.setResizable(false);
        this.setDefaultCloseOperation(DO_NOTHING_ON_CLOSE);
        this.setVisible(true);
      }
    }
    catch(Exception e) {
      System.err.println(e.getMessage());
    }
  }



  private void initComponent() {
    this.pause = new PauseFrame(this);
    this.chargementPause = new ChargementPauseFrame(this);
    this.sauvegardePause = new SauvegarderPauseFrame(this);
    this.sauvegardeQuitterPause = new SauvegarderQuitterPauseFrame(this);

    this.switchablePanel = new JPanel(new CardLayout());
    this.switchablePanel.add(this.pause, "Pause");
    this.switchablePanel.add(this.chargementPause, "Chargement");
    this.switchablePanel.add(this.sauvegardePause, "Sauvegarder");
    this.switchablePanel.add(this.sauvegardeQuitterPause, "SauvegarderQuitter");

    this.switchableCL = (CardLayout)(this.switchablePanel.getLayout());
    this.switchableCL.show(this.switchablePanel, "Pause");

    this.add(this.switchablePanel, BorderLayout.CENTER);
  }
}

```